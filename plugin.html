<!DOCTYPE html>
<head>
<meta http-equiv="X-UA-Compatible" content="IE=edge, chrome=1"/>
<meta name="viewport" content="width=device-width, initial-scale=1.0"/>
<meta property="og:type" content="website"/>
<link rel="preconnect" href="https://fonts.googleapis.com">
<title>Plugin | XQL</title>
<link rel="stylesheet" href="hex.css">
<script src="xcon.js"></script>
<script src="hex.js?v=1.1101"></script>
<script src="query.js?v=1.0"></script>
<script src="que.js?v=1.0"></script>

</head>
<body>
<style>
        .mode {
        font-size: 25px;
        width: 35px; 
        height: 35px; 
        align-items: center;
        display: flex;
        justify-content: center;
        border: 0.1px solid black;
        border-radius: 50%;
    }
    #navhead {
        color: black;
    }
    #header-nav {
       color: black;
    }
    
</style>
<div id="nav"></div>
<br><br>

<div id="body"></div> 
<br><br>

<script>
    
$IMPORT('Nav: nav.hex?v=88');
$START('logs'); 
document.getElementById('nav').Component('Nav');

$IMPORT('@UI');
$START('XQL:Ju2nPjkTtoSVjSq1FowB');
const $con = "Ju2nPjkTtoSVjSq1FowB"; 
const $db = "plugins";

const plug = $GET('id');
if(plug !== null) {
$QUERY($con, $db, `SELECT plugins WHERE pass = '${plug}'`).pull(plugIn)
function plugIn(data) {
row = data[0];
let js = xqlfile + row['js'] + '?v='+makeid(5);
let file = row['config']; 
fET(file, js)
}}

function fET(path, js) {

let string = path; 
string = $encode(nl2br(string));

let fauth = string.match(/\*\*Authors*\s*:(.+?)\*\*/); 
if(fauth) {
author = fauth[1]; 
}
let fdesc = string.match(/\*\*Description\s*:(.+?)\*\*/); 
if(fdesc) {
desc = fdesc[1]; 
}

let fname = string.match(/\*\*Name\s*:(.+?)\*\*/); 
if(fname) {
name = fname[1]; 
}

let fver = string.match(/\*\*Version\s*:(.+?)\*\*/); 
if(fver) {
version = fver[1]; 
}

let flie = string.match(/\*\*License\s*:(.+?)\*\*/); 
if(flie) {
license = flie[1]; 
}



let fht = string.match(/\|\|\s*HTML\s*(.+?)\|\|/s); 
if(fht) {
    
let ht = fht[1];
document.getElementById('body').innerHTML = ht;    
rootHex();  

let fcss = string.match(/\|\|\s*CSS\s*(.+?)\|\|/s); 
if(fcss) {
let css = fcss[1];
let cele = document.createElement("style"); 
cele.textContent = css;
document.body.appendChild(cele);
}



  fetch(js)
  .then(response => response.text())
  .then(scriptContent => {
let scr = document.createElement("script"); 
scr.textContent = scriptContent;
document.body.appendChild(scr);

  }).catch(error => console.error('Error fetching or executing script:', error));
  


}








    
    
}  


function nightM()  {
 document.body.style.background = 'black';
 document.body.style.color = 'white'; 
 toggle('#modes');
 toggle('#moden');
 localStorage.setItem("modex", "night");
}  

function dayM()  {
 document.body.style.background = 'white';
 document.body.style.color = 'black'; 
 toggle('#modes');
 toggle('#moden');
 localStorage.setItem("modex", "day");
}  


let currmode = localStorage.getItem("modex");   
setTimeout(function() {
if(currmode == "day") {   
document.getElementById('modes').click(); 
toggle('#modes');
 toggle('#moden');
}   

if(currmode == "night") {   
document.getElementById('moden').click(); 
} 
}, 500);  




</script>   
    
    
    
</body>
